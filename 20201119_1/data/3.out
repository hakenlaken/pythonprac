1
2
3
проверка на то является ли переменная counter глобальной
Нет, все хорошо! Она описана в декораторе!
